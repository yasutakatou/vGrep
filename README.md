# vGrep

**目grep力を鍛えるためのツール**

# あらすじ(要読み飛ばし)

## エスパー力とは？

エスパー力とは、インフラエンジニアが長年の経験で身につける単なる人間レベルの直感という次元を超えたニュータイプやセブンセンシズレベルの障害察知能力を指す。<br>
例えば一見アプリの不調に見えるのだが、一瞬でバックエンドに控えるキャッシュサーバーのキャパシティ不足に気づけたりするし、**能力が最強レベルまで達すると、オンコールの電話を取った際に不調になったサーバー名を当てられる**とまで言われている。

その源泉はおびただしい量のトラブルシューティング量にあり、またその中で見てきた天文学的な量のログ量とされる<br>
※一説によると、**読んだログ量が一千万行越え**から身に付くとされている(一日3000行以上×245日以上[平日5日]×15年以上)

## Observability(o11y)とは？

可観測性能を示す言葉で(以下略)、エスパー力に頼らずともコンポーネントの不具合（断続的な不調等を含む）などを検知できる仕組みでこれによりトラシュー経験があまり無いエンジニアや、なんならデベロッパーも不具合に気づくことが出来るようになった。

### めでたしめでたし

## ニュータイプやセブンセンシズに再現性は無いのか？

結論から言うと、**ある**、と言える。<br>
ただ、プラクティスとして確立されていないのはトラシューやログ量など、痛い目にあった経験値や、技術的な素振り以上に修練する方法が無いからとなる。<br>
なら、その補助として実装出来るものが無いか？と考えたのがこのツール

# 機能

- Unixのmoreコマンドみたいにページビューでテキストファイルを表示します
- コンフィグに沿って、特定の文字列があった場合に行の色を赤にします
- コンフィグに沿って、特定の文字列があった場合をカウントし、閾値が超えた場合にコンフィグに定義された音声で注意喚起してくれます

## 効用

**※エスパー力のある先輩にコンフィグを書いてもらおう！**

- あやしいメッセージに色がつくので見逃ししないよう気づけるね！
- 音声でお知らせしてくれるので、五感でログを読むのでとても体感的になるね！

# インストール方法
ツールをこのリポジトリからもってきます

```
go get github.com/yasutakatou/vGrep
```

それかクローンしてビルドするか

```
git clone https://github.com/yasutakatou/vGrep
cd vGrep
go build .
```

面倒なら[ここにバイナリファイル置いておくので](https://github.com/yasutakatou/vGrep/releases)手元で展開するでもOKです

# アンインストール方法

Go言語なのでバイナリファイル消してあげればOK！

# 設定ファイル

**設定ファイルはtsv(tab split value)形式です。タブ区切りで定義します**

(①対象メッセージ)	(②閾値)	(③閾値越えした時に再生する音声)

- ① 対象とするエラーメッセージ
- ② 「①」をカウントし、値を超えたら「③」の音声を再生します
- ③ イケてる音声を流しましょう　**※ダメ出し系禁止！**

## 設定ファイルのサンプル

~~~
CRITICAL	1	クリティカルエラーだよ
No valid path found	10	有効なパスが見つからないよ
ERROR	3	エラーみっつだよ
Out of memory	1	メモリ不足だよ
~~~

# ライセンス
Apache-2.0 license